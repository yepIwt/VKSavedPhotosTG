
# Теперь ваши сохранёнки из ВКонтакте объеденины с Телеграмом!

### Как это работает?
Для начала нужно получить токен для API ВКонтакте. Воспользуйтесь [моим приложением](https://oauth.vk.com/authorize?client_id=7928371&display=page&redirect_uri=https://oauth.vk.com/blank.html&scope=photos,offline&response_type=token&v=5.52), т.к оно запрашивает доступ только к фотографиям (или найдите другой способ получить токен).

Для получения токена из моего приложения, перейдите по ссылке и разрашите ему чтение ваших фотографий. Далее скопируйте токен из адресной строки, он находится так: `access_token=` токен `&`.

Скрипт работает самым простым способом. При отправки картинки в Телеграм-чат она загружает в заранее созданный альбом "SYNC_QUEUE" в ВКонтакте (если альбома не будет, то скрипт его создаст).
Из этого же альбома картинка добавляется в "Сохранённые фотографии" и удаляется из временного альбома. 

Во время синхронизации проверяется локальный список картинок, которые сейчас находятся в Телеграм-чате и список сохранёнок на текущий момент. Находится различия между ними и результат загружается в ВКонтакте или Телеграм.

Я долго думал как сделать синхронизацию с ВКонтакте постоянной, хотел сделать поллинг, но решил запускать синхронизацию при добавлении новой картинки в Телеграм-чат.

### Запуск
Для начала создайте Телеграм-бота и добавьте его в Телеграм-чат (ВНИМАНИЕ: НЕ В КАНАЛ). Т.е создайте группу и пригласите бота. Выдайте ему права на чтения сообщений, иначе он не будет видеть картинки.

Добавьте в файл `config.py` токен для API ВКонтакте и токен для Телеграм-бота.

Запустите бота выполнив команду
```python
python core.py
```
Перейдите в созданный Телеграм-чат и отправьте боту `/start`.

Теперь бот запомнит этот чат и будет отправлять новые сохранёнки в него.

## Поддержка
Все баги, недочеты, доработки пишите мне в Телеграме `t.me/codeyouth`
